# GitHub Actions workflow - Optional
# Since you're using direct integration (Connect to Git), Cloudflare will deploy automatically!
# This workflow is only needed if you want more control.

name: Deploy to Cloudflare Pages

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  # This job is disabled - Cloudflare direct integration handles deployment
  deploy:
    runs-on: ubuntu-latest
    if: false  # Disabled - use Cloudflare direct integration instead
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Build
        run: npm ci && npm run build
        env:
          NEXT_PUBLIC_SITE_URL: https://autotools-2k3.pages.dev
          NEXT_PUBLIC_SUPABASE_URL: https://ebkwwwjzouajlqsvykjj.supabase.co
          NEXT_PUBLIC_SUPABASE_ANON_KEY: ${{ secrets.NEXT_PUBLIC_SUPABASE_ANON_KEY }}
          NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME: dc1f1wcuh

      - name: Deploy
        uses: cloudflare/pages-action@v1
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: autotools-2k3
          directory: out
